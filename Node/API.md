##基于node.js的API设计

**什么是数据接口**

​	所谓数据接口就是通过某个入门访问，从而得到一个数据集合，那么前端在拿到这个集合之后就可以对数据进行操作，那么后台任务就不需要关心数据用在哪里，前端也不需要关心数据是从何而来的，也就是说两端可以完全分开开发，其实也就是我们所说的前后端分离，那么，从开发的角度，前后端需要做什么。

**前端关心什么**

​	前端关心的说的简单点，其实就是页面中的东西，如何把页面更加完美的呈现是前端一直工作所需的。而且从历史角度来说。前端从不关心数据方面，因为数据一直时变化的，灵活的，所以前端在早起的只是模板，一般前端是会javascript的，那么如果JS可以拿到数据，其实在后台处理的数据逻辑完全可以拿到前台来做，从而并不需要关心数据是从哪里来的

**后端需要做什么**

​	随着后台web技术的发展，人们对web服务体验的提升，在一张简单的网页中已经是不满足于单纯的数据的展示了。如果我们做一个音乐APP，那么后端需要做的就是提供APP的数据就可以了，那么APP的实现跟他没有太大关系了。

​	所以，后端如果只处理数据服务，前端注重应用功能的逻辑开发，实际上两端的工作是可以同时进行。而且业务交接也比以前的开发模式简单很多。因此，数据API孕育而生

**JSONP跨域模式**

​	跨域我们可能见识过，所谓跨域也就是访问不同域名下的到的一个数据接口，一般访问这个接口是通过script标签的src属性去访问，返回的数据我们可以通过JS直接去操作

```js
<script src=""></script>
```

## resetfulAPI

**resetFUL**

​	资源(所有的东西都叫资源) 	/apple

​	行为都被http请求方式替代了 get post delete put  	**url资源**



**SOA**

​	行为 拿什么东西  /getResource

HTTP请求方式

get   拿到某个资源

post  新增某个资源

delete  删除某个资源

put  修改某个资源



数据安全

​	api认证

curl工具   postman



## OAuth2.0 API认证

看一看阮一峰的网络日志

```js
http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html
```

为什么要认证？提出这个问题的背景？

```js
为了理解OAuth的适用场合，让我举一个假设的例子。 例子的内容大概是这个

有一个"云冲印"的网站，可以将用户储存在Google的照片，冲印出来。用户为了使用该服务，必须让"云冲印"读取自己储存在Google上的照片。
问题是只有得到用户的授权，Google才会同意"云冲印"读取这些照片。那么，"云冲印"怎样获得用户的授权呢？

传统方法是，用户将自己的Google用户名和密码，告诉"云冲印"，后者就可以读取用户的照片了。这样的做法有以下几个严重的缺点。

（1）"云冲印"为了后续的服务，会保存用户的密码，这样很不安全。
（2）Google不得不部署密码登录，而我们知道，单纯的密码登录并不安全。
（3）"云冲印"拥有了获取用户储存在Google所有资料的权力，用户没法限制"云冲印"获得授权的范围和有效期。
（4）用户只有修改密码，才能收回赋予"云冲印"的权力。但是这样做，会使得其他所有获得用户授权的第三方应用程序全部失效。
（5）只要有一个第三方应用程序被破解，就会导致用户密码泄漏，以及所有被密码保护的数据泄漏。

OAuth就是为了解决上面这些问题而诞生的。
```



为什么要认证

​	每个人都有不同的身份，根据不同的身份，数据会有权限

​	身份不同，数据不同，每一个不同的身份会有不同的数据







服务提供方（数据提供）  OAuth2.0就在这边保护着数据



客户端 （第三方网站）



用户  (资源所有者)



其中最重要的一个东西是一个**认证令牌**





```js
passport.js
// 基于node.js的  他有很多不同的策略


passport-http 基本的http策略
passport-oauth2-client-password  基于密码的oauth
passport-http-bearer
oauth2orize
```
